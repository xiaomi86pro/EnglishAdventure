:root{
    --bg-body: #f0f9ff;
    --card-border: #fff;
    --shadow-strong: 0 8px 0 rgba(0,0,0,0.1);
    --accent-blue: #3b82f6;
    --accent-green: #22c55e;
    --accent-pink: #ff9aa2;
    --text-font: 'Montserrat', sans-serif;
    --hero-size: 128px;
    --monster-normal: 64px;
    --monster-elite: 96px;
    --monster-boss: 200px;
    --monster-fboss: 200px;
    --z-ui: 50;
  }
  
  /* Reset cơ bản */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    font-family:var(--text-font);
    background-color:var(--bg-body);
    margin:0;
    padding:.5rem;
    display:flex;
    gap:.5rem;
    overflow:hidden;
  }
  
  /* Card chung */
  .game-card{
    box-shadow:var(--shadow-strong);
    border:4px solid var(--card-border);
  }
  
  /* Layout zones */
  #userUI{background:#74f1e1}
  #dashboard{background:#ffcfd2}
  #battleview{background:#e2f0cb}
  #questionarea{background:#fff}
  
  /* Scrollbar */
  ::-webkit-scrollbar{width:8px}
  ::-webkit-scrollbar-track{background:#f1f1f1}
  ::-webkit-scrollbar-thumb{background:var(--accent-pink);border-radius:10px}
  
  /* Battle view */
  #battleview{
    position:relative;
    width:100%;
    height:260px;
    overflow:hidden;
  }
  
  /* Sprite chung */
  .sprite{
    background-size:contain;
    background-repeat:no-repeat;
    background-position:center;
    margin-bottom:10px;
    transition:all .3s ease;
    pointer-events:none;
  }
  
  /* Hero */
  #hero{
    width:var(--hero-size);
    height:var(--hero-size);
    margin-left:40px;
  }
  
  /* Monster sizes */
  #monster{margin-right:40px}
  #monster.size-normal{width:var(--monster-normal);height:var(--monster-normal)}
  #monster.size-elite{width:var(--monster-elite);height:var(--monster-elite)}
  #monster.size-boss{width:var(--monster-boss);height:var(--monster-boss)}
  #monster.size-fboss{width:var(--monster-fboss);height:var(--monster-fboss)}
  /* Attack and hit effects */
  .attack-lunge{
    animation:attackLunge .28s ease-out forwards;
    z-index:30;
  }
  @keyframes attackLunge{
    0%{transform:translateX(0) translateY(0) scale(1)}
    40%{transform:translateX(var(--attack-x,0)) translateY(var(--attack-y,-8px)) scale(1.03)}
    100%{transform:translateX(0) translateY(0) scale(1)}
  }
  
  .hit-flash{
    animation:hitFlash .28s ease-out;
    box-shadow:0 0 12px rgba(255,0,0,.6);
  }
  @keyframes hitFlash{0%{filter:brightness(1.2);transform:scale(1.02)}100%{filter:brightness(1);transform:scale(1)}}
  
  /* Hero death */
  .hero-dead{
    animation:heroFall .6s ease forwards;
    filter:grayscale(.6) brightness(.7);
  }
  @keyframes heroFall{0%{transform:translateY(0) scale(1)}100%{transform:translateY(12px) scale(.98) rotate(-4deg);opacity:.9}}
  
  /* Damage and heal popups */
  .damage-popup{
    position:absolute;
    transform:translate(-50%,0);
    font-size:48px;
    font-weight:900;
    color:#ff3333;
    text-shadow:0 0 6px #fff;
    animation:floatUp 1.5s ease-out forwards;
    pointer-events:none;
    z-index:var(--z-ui);
  }
  @keyframes floatUp{0%{opacity:1;transform:translate(-50%,0)}100%{opacity:0;transform:translate(-50%,-50px)}}
  
  .heal-popup{
    user-select:none;
    position:absolute;
    transform:translate(-50%,0);
    font-weight:900;
    color:var(--accent-green);
    text-shadow:0 0 8px #fff, 0 0 12px var(--accent-green);
    animation:floatUpHeal 1.5s ease-out forwards;
    pointer-events:none;
    z-index:var(--z-ui);
  }
  @keyframes floatUpHeal{
    0%{opacity:1;transform:translate(-50%,0) scale(1)}
    50%{opacity:1;transform:translate(-50%,-30px) scale(1.2)}
    100%{opacity:0;transform:translate(-50%,-60px) scale(.8)}
  }
  
  /* Heal particles */
  @keyframes healParticle{
    0%{opacity:1;transform:translate(-50%,-50%) translate(0,0) scale(1)}
    100%{opacity:0;transform:translate(-50%,-50%) translate(var(--heal-tx),var(--heal-ty)) scale(.3)}
  }
  .heal-particle{position:absolute;pointer-events:none;font-size:20px;z-index:45;user-select:none;animation:healParticle 1s ease-out forwards}
  
  /* Star particle */
  .star-particle{position:absolute;pointer-events:none;font-size:24px;z-index:100;user-select:none;animation:star-fly .7s ease-out forwards}
  @keyframes star-fly{0%{transform:translate(0,0) scale(1) rotate(0);opacity:1}100%{transform:translate(var(--tx),var(--ty)) scale(0) rotate(360deg);opacity:0}}
  
  /* Glow utilities */
  .glow-en{box-shadow:0 0 10px var(--accent-blue),0 0 20px var(--accent-blue),0 0 40px var(--accent-blue),0 0 80px var(--accent-blue)}
  .glow-vi{box-shadow:0 0 10px var(--accent-green),0 0 20px var(--accent-green),0 0 40px var(--accent-green),0 0 80px var(--accent-green)}
  
  /* Small utilities */
  .animate-shake{animation:shake-wrong .3s ease-in-out}
  @keyframes shake-wrong{0%,100%{transform:translateX(0)}25%{transform:translateX(-10px)}75%{transform:translateX(10px)}}
  
  /* Hero run classes */
  #hero.run-forward{transform:translateX(120px);transition:transform .4s ease}
  #hero.run-back{transform:translateX(0);transition:transform .4s ease}
  #monster.run-forward{transform:translateX(-120px);transition:transform .4s ease}
  #monster.run-back{transform:translateX(0);transition:transform .4s ease}
  
  /* Answer history panel */
  #answer-history{position:fixed;right:0;top:0;width:250px;height:100vh;overflow-y:auto;background:rgba(255,255,255,.8);padding:10px;box-sizing:border-box;z-index:50}
  #answers-history::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.3);border-radius:3px}
  
  /* Misc */
  #preview-area{min-height:80px}

  .btn-disabled {
    background-color: #9ca3af !important;
    color: #ffffff !important;
    cursor: not-allowed !important;
    opacity: 0.85 !important;
    box-shadow: none !important;
    transform: none !important;
    pointer-events: none !important;
  }
  